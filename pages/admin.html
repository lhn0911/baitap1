<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <style>
        .header{
            display: flex;
            background-color: black;
            color: white;
            padding: 5px;
            gap: 50px;
            height: 50px;
            width: 700px;
        }
        .header-left{
            background-color: rgb(224, 224, 238);
            height: 100%;
            width: 710px;
        }
        .quanly{
            border: 0;
            background-color: rgb(224, 224, 238);
            display: flex;

        }
        .material-symbols-outlined{
            display: inline-block;
            align-items: center;
            font-size: 20px;
        }
        .tablequanly{
           
        }
    </style>
</head>
<body>
   <div class="header">
    <p>Admin</p>
    <p>Quay lại web</p>
    <p>Liên hệ</p>
    <p>Đơn hàng</p>
   </div>
    <div class="header-left">
        <span class="material-symbols-outlined">home</span>Trang chủ Admin
        <br>
        <br>
        <span class="material-symbols-outlined">menu</span>Danh mục
        <button onclick="quanlyuser()" class="quanly"><p>Quản lý người dùng</p></button>
        <button onclick="quanlysp()" class="quanly"><p>Quản lý sản phẩm</p></button>
       </div>
       <header class="header-right">
    
       </header>
        <div id="quanlyuser" style="display: none;" class="tablequanly">
            <h1>User Management</h1>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Locked</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="userTableBody">
               
            </tbody>
        </table>
        </div>
        <div id="quanlysp" style="display: none;" class="tablequanly">
            <h1>Quản lý sản phẩm</h1>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Tên sản phẩm</th>
                        <th>Giá</th>
                        <th>Hành động</th>
                    </tr>
                </thead>
                <tbody id="productTableBody">
                    
                </tbody>
            </table>
        </div>
        <div>

        </div>
   </form>
    <script>
        function quanlyuser(){
            document.getElementById("quanlyuser").style.display = "inline-block";
            document.getElementById("quanlysp").style.display = "none";
        }
        function quanlysp(){
            document.getElementById("quanlysp").style.display = "inline-block";
            document.getElementById("quanlyuser").style.display = "none";
        }
        document.addEventListener("DOMContentLoaded", function () {
            // Load user data from localStorage and render the table
            renderUserTable();

            // Add event listeners for Lock, Edit, Delete, and Save buttons
            document.getElementById("userTableBody").addEventListener("click", function(event) {
                let target = event.target;
                if (target.classList.contains("lock-btn")) {
                    toggleLock(parseInt(target.dataset.index));
                } else if (target.classList.contains("edit-btn")) {
                    editUser(parseInt(target.dataset.index));
                } else if (target.classList.contains("delete-btn")) {
                    deleteUser(parseInt(target.dataset.index));
                } else if (target.classList.contains("save-btn")) {
                    saveUser(parseInt(target.dataset.index));
                }
            });
        });

        function renderUserTable() {
            let formDataArray = JSON.parse(localStorage.getItem('formDataArray')) || [];
            let userTableBody = document.getElementById("userTableBody");

            formDataArray.forEach(function (user, index) {
                let row = document.createElement("tr");
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${user.firstName}</td>
                    <td>${user.lastName}</td>
                    <td>${user.email}</td>
                    <td>${user.lock}</td>
                    <td>
                        <button class="lock-btn" data-index="${index}">${user.lock === 'yes' ? 'Unlock' : 'Lock'}</button>

                        <button class="delete-btn" data-index="${index}">Delete</button>
                        
                    </td>
                `;
                userTableBody.appendChild(row);
            });
        }

        function toggleLock(index) {
            let formDataArray = JSON.parse(localStorage.getItem('formDataArray')) || [];
            let user = formDataArray[index];
            user.lock = user.lock === 'yes' ? 'no' : 'yes'; // Toggle lock status
            localStorage.setItem('formDataArray', JSON.stringify(formDataArray));

            // Update the table with the new lock status
            let userTableBody = document.getElementById("userTableBody");
            let row = userTableBody.rows[index];
            row.cells[4].innerText = user.lock;

            // Change button text
            let lockBtn = row.cells[5].querySelector('.lock-btn');
            lockBtn.innerText = user.lock === 'yes' ? 'Unlock' : 'Lock';
        }


function deleteUser(index) {
    let formDataArray = JSON.parse(localStorage.getItem('formDataArray')) || [];
    formDataArray.splice(index, 1); // Remove user from array
    localStorage.setItem('formDataArray', JSON.stringify(formDataArray));

    // Remove row from table
    let userTableBody = document.getElementById("userTableBody");
    userTableBody.deleteRow(index);
}
document.addEventListener("DOMContentLoaded", function () {
    // Load user data from localStorage and render the table

    renderProductTable();

    // Add event listeners for Lock, Edit, Delete, and Save buttons
    document.getElementById("userTableBody").addEventListener("click", function(event) {
        let target = event.target;
        if (target.classList.contains("lock-btn")) {
            toggleLock(parseInt(target.dataset.index));
        } else if (target.classList.contains("edit-btn")) {
            editUser(parseInt(target.dataset.index));
        } else if (target.classList.contains("delete-btn")) {
            deleteUser(parseInt(target.dataset.index));
        } else if (target.classList.contains("save-btn")) {
            saveUser(parseInt(target.dataset.index));
        }
    });
});

function renderProductTable() {
    let products = JSON.parse(localStorage.getItem('products')) || [];
    let productTableBody = document.getElementById("productTableBody");

    products.forEach(function (product, index) {
        let row = document.createElement("tr");
        row.innerHTML = `
            <td>${index + 1}</td>
            <td>${product.name}</td>
            <td>${product.price}</td>
            <td>
                <button class="edit-product-btn" data-index="${index}">Edit</button>
                <button class="delete-product-btn" data-index="${index}">Delete</button>
            </td>
        `;
        productTableBody.appendChild(row);
    });
}

</script>
</body>
</html>
